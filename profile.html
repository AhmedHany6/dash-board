<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Profile | Hyper - Responsive Bootstrap 5 Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />
   

    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">

    <!-- Theme Config Js -->
 

    <script src="assets/js/hyper-config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


    
    <!-- App css -->
    <link href="assets/css/app-saas.min.css" rel="stylesheet" type="text/css" id="app-style" />

    <!-- Icons css -->
    
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    /* لما ينضغط الزر ويتغير المحتوى */
    .wrapper.content-shift {
        margin-left: 180px; /* المحتوى يتحرك ناحية اليمين */
      
    }
    .notification-dropdown {
    display: none; /* اجعلها تظهر عند الحاجة */
    position: absolute;
    background-color: white;
    border: 1px solid #ccc;
    width: 300px;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    border-radius: 8px; /* إضافة حدود دائرية */
}

.notification-item {
    display: flex;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid #eee; /* إضافة حد بين الإشعارات */
}

.notification-item:last-child {
    border-bottom: none; /* إزالة الحد الأخير */
}

.notification-icon {
    width: 30px; /* حجم أصغر */
    height: 30px; /* حجم أصغر */
    border-radius: 50%; /* لجعلها دائرية */
    margin-right: 10px;
}

.notification-content {
    flex-grow: 1;
}

.view-all {
    display: block;
    text-align: center;
    padding: 10px;
    background-color: #007bff;
    color: white;
    text-decoration: none;
    border-radius: 10%; /* لجعل الزر دائري */
    margin: 10px auto; /* توسيط الزر */
    width: 90px; /* عرض الزر */
    height: 50px; /* ارتفاع الزر */
    line-height: 30px; /* توسيط النص داخل الزر */
}

.view-all:hover {
    background-color: #0056b3;
}
    
</style>
  
</head>
<body>



     <!-- ✅ Navbar -->
     <nav class="top-bar">
        <div class="search-container">
            <input type="text" placeholder="Search..." class="search-input">
            <button class="search-button">
                <i class="fa-sharp fa-solid fa-magnifying-glass"></i>
            </button>
        </div>
        <div class="icon-section">
            <i class="fas fa-envelope"></i>
            <!-- أيقونة الإشعارات مع البادج -->
<div class="notification-container">
    <i class="fas fa-bell" id="notificationBell"><span class="notification-badge">4</span></i>
    
    <!-- Dropdown الإشعارات -->
    <div class="notification-dropdown" id="notificationDropdown">
        <div class="dropdown-header">
            <h3>Notifications</h3>
            <a href="#" class="mark-read">Mark all as read</a>
        </div>
        
        <div class="notification-list">
            <!-- الإشعارات الجديدة -->
            <div class="notification-section">
                <h4>NEW</h4>
                <div class="notification-item unread">
                    <img src="./images/menna.jpeg" alt="Notification Icon" class="notification-icon">
                    <div class="notification-content">
                        Emma Watson replied to your comment: "Hello world 😊"
                        <span class="notification-time">Just now</span>
                    </div>
                </div>
                <div class="notification-item unread">
                    <img src="./images/menna.jpeg" alt="Notification Icon" class="notification-icon">
                    <div class="notification-content">
                        Emma Watson replied to your comment: "Hello world 😊"
                        <span class="notification-time">Just now</span>
                    </div>
                </div>
              
                <!-- باقي الإشعارات هنا -->
            </div>
            
            <!-- الإشعارات القديمة -->
            <div class="notification-section">
                <h4>EARLIER</h4>
                <div class="notification-item">
                    <img src="./images/istockphoto-1185418020-170667a.jpg" alt="Notification Icon" class="notification-icon">
                    <div class="notification-content">
                        The forecast today shows a low of 20°C in California.
                        <span class="notification-time">8h ago</span>
                    </div>
                </div>
                <!-- باقي الإشعارات هنا -->
            </div>
        </div>
        
        <a href="./nofigation.html" class="view-all">View all</a>
    </div>
</div>
            <i class="fas fa-layer-group"></i>
            <div class="user-profile" onclick="toggleDropdown()">
                <img src="assets/images/avata.jpeg" alt="image profile">
                <span>Hi, Hizrian</span>

                <div class="dropdown-box">
                    <div class="user-info">
                        <h3>Kevin Anderson</h3>
                        <p>مصمم مواقع</p>
                    </div>
                    <ul>
                        <li><i class="fas fa-user"></i> الحساب الشخصي</li>
                        <li><i class="fas fa-cog"></i> الإعدادات</li>
                        <li><i class="fas fa-question-circle"></i> المساعدة</li>
                        <li><i class="fas fa-sign-out-alt"></i> تسجيل الخروج</li>
                    </ul>
                </div>

            </div>
        </div>
    </nav>


</div>




<!-- =============== sidebar ================ -->

<div class="sidebar">
    <div class="sidebar-header">
        <img src="assets/images/logo.png" alt="logo">
        <div class="toggle-btn">☰</div>
    </div>

    <ul>

        <li data-id="dashboard" class="admin-only">
    <a href="index.html">
      <span class="icon"><i class="fa-sharp fa-solid fa-house"></i></span>
      <span class="text">Dashboard</span>
    </a>
  </li>

  <li data-id="users" class="admin-only">
    <a href="user.html">
      <span class="icon"><i class="fa-solid fa-users"></i></span>
      <span class="text">Users</span>
    </a>
  </li>

  <li data-id="jobs" class="admin-only">
    <a href="job.html">
      <span class="icon"><i class="fa-solid fa-briefcase"></i></span>
      <span class="text">Jobs</span>
    </a>
  </li>

  <li data-id="view" class="user-only">
    <a href="view.html">
      <span class="icon"><i class="fa-sharp fa-solid fa-eye"></i></span>
      <span class="text">View jobs</span>
    </a>
  </li>

  <li data-id="companies" class="admin-only">
    <a href="company.html">
      <span class="icon"><i class="fa-solid fa-buildings"></i></span>
      <span class="text">Companies</span>
    </a>
  </li>

  <li class="user-only">
    <a href="./app/chat.html">
      <span class="icon"><i class="fas fa-comments"></i></span>
      <span class="text">Chat</span>
    </a>
  </li>

  <li data-id="profile" class="user-only">
    <a href="profile.html">
      <span class="icon"><i class="fa-solid fa-user"></i></span>
      <span class="text">Profile</span>
    </a>
  </li>

  <li data-id="register" class="admin-only">
    <a href="./signup.html">
      <span class="icon"><i class="fa-solid fa-user-plus"></i></span>
      <span class="text">Register</span>
    </a>
  </li>

  <li data-id="setting" class="admin-only">
    <a href="setting.html">
      <span class="icon"><i class="fa-solid fa-gear"></i></span>
      <span class="text">Settings</span>
    </a>
  </li>

  <li data-id="logout">
    <a href="#" onclick="logout()">
      <span class="icon"><i class="fa-solid fa-right-from-bracket"></i></span>
      <span class="text">Logout</span>
    </a>
  </li>
</ul>
</div>

    <!-- Begin page -->
    <div class="wrapper">

        <!-- ============================================================== -->
        <!-- Start Page Content here -->
        <!-- ============================================================== -->

        <div class="content-page">
            <div class="content">

                <!-- Start Content-->
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box">
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Hyper</a></li>
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Pages</a></li>
                                        <li class="breadcrumb-item active">Profile 2</li>
                                    </ol>
                                </div>
                                <h4 class="page-title">Profile 2</h4>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->

                    <div class="row">
                        <div class="col-xl-4 col-lg-5">
                            <div class="card text-center">
                                <div class="card-body">
                                 <!-- الصورة -->
    <img id="profileImage" src="./images/pngtree-vector-users-icon-png-image_856952.jpg" class="rounded-circle avatar-lg img-thumbnail" alt="profile-image">

    <h4 class="mb-0 mt-2">Menna Kamal</h4>
    <p class="text-muted font-14">Founder</p>

    <!-- إدخال مخفي لاختيار الصورة -->
    <input type="file" id="uploadProfile" accept="image/*" style="display: none;" onchange="uploadNewImage(event)">

    <!-- زر تحميل صورة -->
    <button type="button" class="btn btn-primary btn-sm mb-2" onclick="document.getElementById('uploadProfile').click();">
        Upload 
    </button>

    <!-- زر حذف الصورة -->
    <button type="button" class="btn btn-danger btn-sm mb-2" onclick="deleteProfileImage()">
        Delete 
    </button>
                                    <div class="text-start mt-3">
                                        
                                        <p class="text-muted mb-2 font-13"><strong>Full Name :</strong> <span class="ms-2">Geneva
                                                D. McKnight</span></p>

                                        <p class="text-muted mb-2 font-13"><strong>Mobile :</strong><span class="ms-2">(123)
                                                123 1234</span></p>

                                        <p class="text-muted mb-2 font-13"><strong>Email :</strong> <span class="ms-2 ">user@email.domain</span></p>

                                      
                                    </div>

                                   <!-- زر إضافة شركة -->
<!-- زر إضافة شركة - سيفتح في نفس الصفحة ضمن تبويب الـ Settings -->
<button type="button" class="btn btn-success btn-sm mb-2" onclick="switchToSettingsTab()">
    <i class="mdi mdi-plus"></i> Add Company
</button>

<script>
function switchToSettingsTab() {
    // إيجاد عنصر تبويب الـ Settings وتفعيله
    const settingsTab = document.querySelector('a[href="#settings"][data-bs-toggle="tab"]');
    if (settingsTab) {
        const tabInstance = new bootstrap.Tab(settingsTab);
        tabInstance.show();
        
        // بعد تفعيل التبويب، يمكنك تنفيذ أي أكواد إضافية هنا
        // أو تحميل محتوى الشركة في هذا التبويب
    }
}
</script>
                                </div>
                                <!-- end card-body -->
                            </div>
                            <!-- end card -->

                           
                            <div class="card">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        
                                        <div class="dropdown">
                                         
                                              
                                            </a>
                                          
                                        </div>
                                    </div>

                                  
                                </div>
                                <!-- end card-body-->
                            </div>
                            <!-- end card-->

                        </div>
                        <!-- end col-->

                        <div class="col-xl-8 col-lg-7">
                            <div class="card">
                                <div class="card-body">
                                    <ul class="nav nav-pills bg-nav-pills nav-justified mb-3">
                                        <li class="nav-item">
                                            <a href="#profile" data-bs-toggle="tab" aria-expanded="false" class="nav-link rounded-0">
                                                About
                                            </a>
                                        </li>
                                      
                                        <li class="nav-item">
                                            <a href="#settings" data-bs-toggle="tab" aria-expanded="false" class="nav-link rounded-0">
                                                Settings
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane" id="about">

                                            <h5 class="text-uppercase"><i class="mdi mdi-briefcase me-1"></i> Experience
                                            </h5>

                                            <div class="timeline-alt pb-0">
                                                <div class="timeline-item">
                                                    <i class="mdi mdi-circle bg-info-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <h5 class="mt-0 mb-1">Lead designer / Developer</h5>
                                                        <p class="font-14">websitename.com <span class="ms-2 font-12">Year: 2015 - 18</span></p>
                                                        <p class="text-muted mt-2 mb-0 pb-3">Everyone realizes why a new common language would be desirable: one could refuse to pay expensive translators. To achieve this, it would be necessary to have uniform grammar, pronunciation and more
                                                            common words.</p>
                                                    </div>
                                                </div>

                                                <div class="timeline-item">
                                                    <i class="mdi mdi-circle bg-primary-lighten text-primary timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <h5 class="mt-0 mb-1">Senior Graphic Designer</h5>
                                                        <p class="font-14">Software Inc. <span class="ms-2 font-12">Year: 2012 - 15</span></p>
                                                        <p class="text-muted mt-2 mb-0 pb-3">If several languages coalesce, the grammar of the resulting language is more simple and regular than that of the individual languages. The new common language will be more simple and regular than
                                                            the existing European languages.</p>

                                                    </div>
                                                </div>

                                                <div class="timeline-item">
                                                    <i class="mdi mdi-circle bg-info-lighten text-info timeline-icon"></i>
                                                    <div class="timeline-item-info">
                                                        <h5 class="mt-0 mb-1">Graphic Designer</h5>
                                                        <p class="font-14">Coderthemes Design LLP <span class="ms-2 font-12">Year: 2010 - 12</span></p>
                                                        <p class="text-muted mt-2 mb-0 pb-2">The European languages are members of the same family. Their separate existence is a myth. For science music sport etc, Europe uses the same vocabulary. The languages only differ in their grammar
                                                            their pronunciation.</p>
                                                    </div>
                                                </div>

                                            </div>
                                            <!-- end timeline -->

                                       
                                    
                                            <div class="table-responsive">
                                                <table class="table table-borderless table-nowrap mb-0">
                                                  

                                                    </tbody>
                                                </table>
                                            </div>

                                        </div>
                                        <!-- end tab-pane -->
                                        <!-- end about me section content -->

                                        

                                            <!-- Story Box-->
                                            <div class="border border-light rounded p-2 mb-3">
                                                

                                    
                                                    
                                                  
                                                </div>


                                           

                                           

                                        </div>
                           
                                        <!-- end timeline content-->
 <form id="companyForm" enctype="multipart/form-data">
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="companyname" class="form-label">Company Name</label>
            <input type="text" class="form-control" id="companyname" placeholder="Enter company name" required>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <label for="companylogo" class="form-label">Logo</label>
            <input type="file" class="form-control" id="companylogo" accept="image/*" required>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <input type="text" class="form-control" id="description" placeholder="Company description" required>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <input type="text" class="form-control" id="location" placeholder="Company location" required>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="website" class="form-label">Website</label>
            <input type="url" class="form-control" id="website" placeholder="https://example.com" required>
          </div>
        </div>
        <div class="col-md-3">
          <div class="mb-3">
            <label for="size" class="form-label">Size</label>
            <input type="text" class="form-control" id="size" placeholder="e.g. medium" required>
          </div>
        </div>
        <div class="col-md-3">
          <div class="mb-3">
            <label for="hired_people" class="form-label">Hired People</label>
            <input type="number" class="form-control" id="hired_people" placeholder="185000" required>
          </div>
        </div>
      </div>

      <div class="text-end">
       <button type="submit" class="btn btn-success" id="saveCompanyBtn">

          <i class="bi bi-save"></i> Save
        </button>
      </div>
    </form>
  </div>


    <!-- END wrapper -->

    
    
    <!-- App js -->

    <script src="assets/js/app.min.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/login.js"></script>
    <script>
         protectPage(['super-admin','admin']);
    </script>
    <script src="js/main.js"></script>
    

  

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- App js -->
<script src="assets/js/app.min.js"></script>
<script src="./assets/js/about.js"></script>
<!-- jQuery مطلوب لبعض المكونات -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


                    <script>
                        function uploadNewImage(event) {
                            const file = event.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = function(e) {
                                    const imageData = e.target.result;
                                    document.getElementById("profileImage").src = imageData;
                                    localStorage.setItem("profileImage", imageData);
                                };
                                reader.readAsDataURL(file);
                            }
                        }
                
                        function deleteProfileImage() {
                            const defaultImage = "./images/pngtree-vector-users-icon-png-image_856952.jpg";
                            document.getElementById("profileImage").src = defaultImage;
                            localStorage.removeItem("profileImage");
                        }
                
                        document.addEventListener("DOMContentLoaded", function () {
                            const profileImage = localStorage.getItem("profileImage");
                            if (profileImage) {
                                document.getElementById("profileImage").src = profileImage;
                            }
                        });
                    </script> 
                    
                 <script>
document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById('companyForm');
  
  // Show loading state in the button when form is submitted
  function setButtonLoading(isLoading) {
    const saveButton = document.getElementById('saveCompanyBtn');
    if (isLoading) {
      saveButton.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Saving...';
      saveButton.disabled = true;
    } else {
      saveButton.innerHTML = '<i class="bi bi-save"></i> Save';
      saveButton.disabled = false;
    }
  }

  // Validate form inputs
  function validateForm() {
    const name = document.getElementById('companyname').value.trim();
    const description = document.getElementById('description').value.trim();
    const location = document.getElementById('location').value.trim();
    const website = document.getElementById('website').value.trim();
    const size = document.getElementById('size').value.trim();
    const hired_people = document.getElementById('hired_people').value.trim();
    const logoFile = document.getElementById('companylogo').files[0];

    if (!name || !description || !location || !website || !size || !hired_people) {
      Swal.fire({
        icon: 'warning',
        title: 'Missing Information',
        text: 'Please fill in all required fields.',
      });
      return false;
    }

    if (!logoFile) {
      Swal.fire({
        icon: 'warning',
        title: 'Logo Required',
        text: 'Please upload a company logo.',
      });
      return false;
    }

    // Basic validation for website format
    if (!website.startsWith('http://') && !website.startsWith('https://')) {
      Swal.fire({
        icon: 'warning',
        title: 'Invalid Website Format',
        text: 'Website URL should start with http:// or https://',
      });
      return false;
    }

    // Validate hired_people is a positive number
    if (isNaN(hired_people) || parseInt(hired_people) < 0) {
      Swal.fire({
        icon: 'warning',
        title: 'Invalid Number',
        text: 'Hired people should be a positive number.',
      });
      return false;
    }

    return true;
  }

  form.addEventListener('submit', async function (e) {
    e.preventDefault();

    if (!validateForm()) {
      return;
    }

    setButtonLoading(true);

    const name = document.getElementById('companyname').value;
    const description = document.getElementById('description').value;
    const location = document.getElementById('location').value;
    const website = document.getElementById('website').value;
    const size = document.getElementById('size').value;
    const hired_people = document.getElementById('hired_people').value;
    const logoFile = document.getElementById('companylogo').files[0];

    const formData = new FormData();
    formData.append('name', name);
    formData.append('description', description);
    formData.append('location', location);
    formData.append('website', website);
    formData.append('size', size);
    formData.append('hired_people', hired_people);
    formData.append('logo', logoFile);

    // Get authentication token - you might want to store this in a more secure way
    const authToken = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwczovL2pvYml6YWEuY29tL2FwaS9hZG1pbi9sb2dpbiIsImlhdCI6MTc0NzQzMjM3NCwibmJmIjoxNzQ3NDMyMzc0LCJqdGkiOiJLcGlxNDhGdnE3T3hGNXNtIiwic3ViIjoiNSIsInBydiI6ImRmODgzZGI5N2JkMDVlZjhmZjg1MDgyZDY4NmM0NWU4MzJlNTkzYTkiLCJyb2xlcyI6WyJhZG1pbiJdLCJwZXJtaXNzaW9ucyI6WyJtYW5hZ2Utb3duLWNvbXBhbnkiLCJtYW5hZ2UtY29tcGFueS1qb2JzIiwibWFuYWdlLWNvbXBhbnktYWRtaW5zIiwibWFuYWdlLWFwcGxpY2F0aW9ucyIsInZpZXctYXBwbGljYW50LXByb2ZpbGVzIiwic2VuZC1tZXNzYWdlcyJdLCJjb21wYW55X2lkIjo1fQ.ug7Jsd21l2QZ14Uyalsn_0ybTwYwXYhZx8td2doHy5s';

    try {
      const response = await fetch('https://jobizaa.com/api/admin/companies/add-company', {
        method: 'POST',
        headers: {
          "Authorization": `Bearer ${authToken}`
        },
        body: formData
      });

      const result = await response.json();
      console.log('API Response:', result);

      if (response.ok) {
        Swal.fire({
          icon: 'success',
          title: 'Success',
          text: 'Company has been added successfully!',
        }).then(() => {
          // Store data in localStorage if needed for immediate display on next page
          const companyData = {
            name: name,
            description: description,
            location: location,
            website: website,
            size: size,
            hired_people: hired_people,
            id: result.data?.id || null
          };
          
          localStorage.setItem('newCompany', JSON.stringify(companyData));
          localStorage.setItem('newCompanyAdded', 'true');
          
          // Redirect to companies listing page
          window.location.href = "company.html";
        });
      } else {
        // Handle API errors
        let errorMessage = 'Failed to save company data.';
        
        if (result.message) {
          errorMessage = result.message;
        } else if (result.errors) {
          // Format validation errors if provided by the API
          const errors = Object.values(result.errors).flat();
          if (errors.length > 0) {
            errorMessage = errors.join('<br>');
          }
        }
        
        Swal.fire({
          icon: 'error',
          title: 'Error',
          html: errorMessage,
        });
      }
    } catch (error) {
      console.error('Network Error:', error);
      Swal.fire({
        icon: 'error',
        title: 'Connection Error',
        text: 'Please check your internet connection and try again.',
      });
    } finally {
      setButtonLoading(false);
    }
  });

  // Optional: Preview image before upload
  document.getElementById('companylogo').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        // You could add an img element to preview the logo if desired
        console.log('Logo selected:', file.name);
      };
      reader.readAsDataURL(file);
    }
  });
});
</script>

 </body>
</html>